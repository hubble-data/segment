version: 2

models:
  - name: segment_web_sessions
    description: "The purpose of this model is to expose a single web session, derived from Segment web events. Sessions are the most common way that analysis of web visitor behavior is conducted, and although Segment doesn't natively output session data, this model uses standard logic to create sessions out of page view events.

    A session is meant to represent a single instance of web activity where a user is actively browsing a website. In this case, we are demarcating sessions by 30 minute windows of inactivity: if there is 30 minutes of inactivity between two page views, the second page view begins a new session. Additionally, page views across different devices will always be tied to different sessions.

    The logic implemented in this particular model is responsible for incrementally calculating a user's session number; the core sessionization logic is done in upstream models."
    columns:
      - name: session_id
        description: ''
        tests:
          - unique
          - not_null
      - name: session_id
        description: ''
      - name: anonymous_id
        description: ''
      - name: session_start_tstamp
        description: ''
      - name: session_end_tstamp
        description: ''
      - name: page_views
        description: ''
      - name: utm_source
        description: ''
      - name: utm_content
        description: ''
      - name: utm_medium
        description: ''
      - name: utm_campaign
        description: ''
      - name: gclid
        description: ''
      - name: first_page_url
        description: ''
      - name: first_page_url_host
        description: ''
      - name: first_page_url_path
        description: ''
      - name: first_page_url_query
        description: ''
      - name: referrer
        description: ''
      - name: referrer_host
        description: ''
      - name: device
        description: ''
      - name: device_category
        description: ''
      - name: last_page_url
        description: ''
      - name: last_page_url_host
        description: ''
      - name: last_page_url_path
        description: ''
      - name: last_page_url_query
        description: ''
      - name: duration_in_s
        description: ''
      - name: duration_in_s_tier
        description: ''
      - name: referrer_medium
        description: ''
      - name: referrer_source
        description: ''
      - name: blended_user_id
        description: ''
      - name: session_number
        description: ''
